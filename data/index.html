<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <title>Data - Francke AudioGuide-v2 Docs</title>
  

  <link rel="shortcut icon" href="../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Data";
    var mkdocs_page_input_path = "data.md";
    var mkdocs_page_url = "/data/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Francke AudioGuide-v2 Docs</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">Home</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../app/">App</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 current">
        <a class="current" href="./">Data</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#daten-und-einstellungen">Daten und Einstellungen</a></li>
                
                    <li><a class="toctree-l4" href="#configjson">config.json</a></li>
                
                    <li><a class="toctree-l4" href="#areasjson">areas.json</a></li>
                
                    <li><a class="toctree-l4" href="#beaconsconfigjson">beaconsConfig.json</a></li>
                
                    <li><a class="toctree-l4" href="#toursjson">tours.json</a></li>
                
                    <li><a class="toctree-l4" href="#mogliche-backend-losungen">Mögliche Backend Lösungen</a></li>
                
                    <li><a class="toctree-l4" href="#alternative-tour-struktur">Alternative Tour Struktur</a></li>
                
            
            </ul>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../BeaconSetup/">Beacon Setup</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../deploy/">How To Deploy</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../how_to_docs/">How To Docs</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../BeaconScan&Sort/">Beacon Scan&Sort</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Francke AudioGuide-v2 Docs</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Data</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="daten-und-einstellungen">Daten und Einstellungen</h1>
<p>Die Pfade zu den zu ladenden Daten werden aktuell in src/js/dataPaths.js gespeichert. Sollten die Pfade geändert werden muss derzeit die Anwendung neu gebuildet werden.</p>
<h2 id="configjson">config.json</h2>
<p>Hier werden Pfade zu SVG Grafiken und Texte für die UI Elemente und App Konfigurationen wie beispielsweise wählbare Sprachen hinterlegt. Die ID der Sprache wird innerhalb des "ui" Blockes als <em>key</em> für die Texte verwendet.</p>
<ul>
<li>"languages" : [] - In der App angebotene Sprachen<ul>
<li>"name" : String - Name der Sprache. Wird unter dem Sprachauswahlbutton verwendet</li>
<li>"id" : String - ID der Sprache. Wird als <em>key</em> in "ui" für die Textwahl verwendet</li>
</ul>
</li>
</ul>
<h2 id="areasjson">areas.json</h2>
<p>In areas.json werden die Positionen und Dimensionen der Elemente auf der Karte und in den Gebäuden definiert. Sie ist so angelegt, dass Führungen für mehrere verschiedene Orte abseits der Frankeschen Stiftungen angelegt werden können. Für die App der Frankeschen Stiftung wird die Area mit dem Key <strong>"frankesche_stiftung"</strong> verwendet.</p>
<p>Für die Zuordnung von Tour Elementen (z.B. das Gebäude "Waisenhaus" mit der id "waisenhaus") müssen die ID in tours.json mit dem Key des Elements in areas.json übereinstimmen. Der Name ("name") dient nur der eigenen erleichterten Zuordung.</p>
<p>Beispiel aus areas.json:</p>
<pre><code>{
    &quot;waisenhaus&quot;: {
        &quot;name&quot;: &quot;Gebäude Waisenhaus&quot;,
        &quot;boundingBox&quot;: {
            &quot;left&quot;: &quot;6.2317%&quot;,
            &quot;top&quot;: &quot;76.5919%&quot;,
            &quot;width&quot;: &quot;10.918%&quot;,
            &quot;height&quot;: &quot;5.6255%&quot;
        },
        &quot;svg&quot;: &quot;./assets/svg/waisenhaus/waisenhaus_aussen.svg&quot;,
        &quot;floor1&quot;: {
            &quot;name&quot;: &quot;1. Stockwerk&quot;,
            &quot;boundingBox&quot;: {
                  &quot;left&quot;: &quot;0%&quot;,
                  &quot;top&quot;: &quot;0%&quot;,
                  &quot;width&quot;: &quot;100%&quot;,
                  &quot;height&quot;: &quot;100%&quot;
            },
            &quot;svg&quot; : &quot;...&quot;
        }
    }
}
</code></pre>

<p>Entsprechend in tours.json:</p>
<pre><code>{
    &quot;content&quot;: [
        {
            &quot;id&quot;: &quot;waisenhaus&quot;
            ...
        }
    ]
}
</code></pre>

<p>Die <em>boundingBox</em> Angaben beziehen sich immer relativ auf die Dimension des Elementes, in dem sie sich befinden.</p>
<h2 id="beaconsconfigjson">beaconsConfig.json</h2>
<p>Beacons Config beschreibt allgemeine sowie individuelle Beacon Einstellungen für die Bluetooth Beacons.</p>
<pre><code>{
  &quot;settings&quot;: {
    &quot;scanRegions&quot;: &quot;FDA50693-A4E2-4FB1-AFCF-C6EB07647825&quot;,
    &quot;beaconMinValues&quot;: 2,
    &quot;beaconMaxValues&quot;: 4,
    &quot;beaconMaxAge&quot;: 10
  },
  &quot;beacons&quot;: {
      &quot;FDA50693-A4E2-4FB1-AFCF-C6EB07647825:10:7&quot;: {
        &quot;triggerDistanceImmediate&quot;: -50,
        &quot;triggerDistanceInner&quot;: -60,
        &quot;triggerDistanceOuter&quot;: -67,
        &quot;rssi&quot;: -59,
        &quot;description&quot;: &quot;beschreibung&quot;,
        &quot;batteryLife&quot;: 100,
        &quot;boundingBox&quot;: {
          &quot;top&quot;: &quot;5%&quot;,
          &quot;left&quot;: &quot;8%&quot;,
          &quot;width&quot;: &quot;20%&quot;,
          &quot;height&quot;: &quot;20%&quot;
        }
    }
  }
}
</code></pre>

<ul>
<li>"settings" : {} - Beinhaltet allgemeine Einstellungen die alle Beacons und den Beacon Scan betreffen.<ul>
<li>"scanRegions" : String - UUID der Scan Region für das Bluetooth Beacon Plugin (To Do: Ersetzen durch Array um mehrere Regionen zu ermöglichen.</li>
<li>"beaconMinValues" : int - minimale RSSI Werte die je Beacon empfangen worden sein, bevor der Durchschnitt verwendet wird</li>
<li>"beaconMaxValues" : int - maximale Anzahl an RSSI Werten, die gespeichert werden Sollten</li>
<li>"beaconMaxAge" : int - Maximales Alter der RSSI Werte in Sekunden, bevor der Wert gelöscht wird</li>
</ul>
</li>
<li>"beacons" : {} - Beinhaltet die individuellen Beacon Einstellungen mit Trigger Werten mit einem Key  <em>UUID:Major:Minor</em><ul>
<li>"triggerDistanceInner" : float - Regulärer Trigger Wert. Überschreitet der RSSI Wert (Achtung negative Werte) den Inner Radius wird er ausglöst sofern kein anderer bereits aktiver Beacon besteht.</li>
<li>"triggerDistanceOuter" : float - Der Aktive Beacon bleibt solange Aktiv wie er diesen Wert überschreitet</li>
<li>"triggerDistanceImmediate" : float - Überschreitet der RSSI Wert (Achtung negative Werte) des Beacons triggerDistanceImmediate wird er sofort ausgelöst (Ausnahme: Ein anderer bereits aktiver Beacon überschreitet bereits den für ihn definierten immediate Wert)</li>
<li>"rssi" : int - Noch nicht implementiert - Su Fragen wofür der Wert da ist</li>
<li>"description" : String - Beschreibung des Standortes zur Zuordnung</li>
<li>"batteryLife" : int - Aktueller Batteryzustand, wird noch nicht verwendet</li>
<li>"boundingBox" : {} - Angaben zum Standort des Beacons im Raum (für die Darstellung im CMS und ggf. im Debug Overlay der App)</li>
</ul>
</li>
</ul>
<h2 id="toursjson">tours.json</h2>
<p>Touren werden in tour.json gespeichert (änderbar in src/js/dataPath, App muss jedoch neu gebuildet werden)
<strong>Jede Tour und jedes Element innerhalb der Tour benötigt eine einzigartige ID ("id" : String</strong>)</p>
<ul>
<li>"tours" : [] - Array aus Tour Objekten<ul>
<li>"id" : String - Unique Tour ID</li>
<li>"language" : String - ID der Sprache der Tour (vgl. config.json "languages"). Dient dem Filtern der Touren für die Sprachen in der UI</li>
<li>"name" : String - Titel der Tour</li>
<li>"duration" : String - Dauer der Tour</li>
<li>"units" : String - Zeitangabe (Für die Aufsplittung im UI)</li>
<li>"description" : String - Beschreibung der Tour</li>
<li>"beacons" : {} : Enthält die für die Tour verwendeten Beacon UUID:Major:Minor Keys mit der ID des Elementes, welches sie aufrufen sollen<ul>
<li>"FDA50693-A4E2-4FB1-AFCF-C6EB07647825:10:7" : {} - Beacon UUID:Major:Minor Key<ul>
<li>"elementID": String - ID des Elementes, welches dieser Beacon auslöst/öffnet</li>
</ul>
</li>
</ul>
</li>
<li>"content" : [] - Array aus Gebäude Objekten die dieser Tour zugeordnet sind.</li>
</ul>
</li>
</ul>
<pre><code>{
    &quot;tours&quot;: [
        {
            &quot;id&quot;: &quot;tour1&quot;,
            &quot;language&quot;: &quot;de&quot;,
            &quot;name&quot;: &quot;Historisches Waisenhaus&quot;,
            &quot;duration&quot;: &quot;30&quot;,
            &quot;units&quot;: &quot;min&quot;,
            &quot;description&quot;: &quot;Mit dem Bau des Halleschen Waisenhauses und der daran anschließenden Gesamtanlage rund um den heutigen Lindenhof hat sich August Hermann Francke in die Geschichte eingeschrieben. Innovationen in der Baukunst ließen eine Architektursprache entstehen, die funktional, vielseitig nutzbar und wegweisend für die Entwicklung der Bildungs- und Sozialarchitektur war.&quot;,
            &quot;beacons&quot;: {
                &quot;FDA50693-A4E2-4FB1-AFCF-C6EB07647825:10:7&quot;: {
                    &quot;elementID&quot;: &quot;raum2&quot;
                },
                &quot;FDA50693-A4E2-4FB1-AFCF-C6EB07647825:20:2&quot;: {
                    &quot;elementID&quot;: &quot;schrank&quot;
                }
            },
            &quot;content&quot;: [
                {}
            ]
        }
    ]
}
</code></pre>

<p>Insgesamt werden die Inhalte der Tour-Struktur entsprechend ineinander verschachtelt. Die Struktur ist wie folgt:</p>
<ul>
<li>Tour<ul>
<li>Gebäude<ul>
<li>Stockwerk<ul>
<li>Raum<ul>
<li>Navigationselement und/oder</li>
<li>Exponat<ul>
<li>Kapitel</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Jedes Element muss über einen "content" Key verfügen, der ein Array an Objekten enthält.</p>
<pre><code>"id" : "irgendeinObjekt",
"content" :
[
    {
        ... Kind Element
    }
]
</code></pre>
<p>Das Aufrufen und Aktivieren von Elementen wird durch ein Abgleichen der id mit dem gewählten Element gehandhabt.</p>
<h3 id="definition-von-elementen-in-raume">Definition von Elementen in Räume</h3>
<p>Räume können Exponate oder Navigationselemente beinhalten. Exponate werden dargestellt durch die in der config.json für "exhibit" definierten SVG, wogegen die Darstellung von Navigationselementen frei und sogar optional ist. Sie können auch nur als unsichtbare Trigger dienen, um andere Elemente zu aktivieren, z.B. um den nächsten oder vorherigen Raum aufzurufen oder das Stockwerk zu wechseln.</p>
<h4 id="exhibit">Exhibit</h4>
<ul>
<li><strong>"type" : "exhibit"</strong> - definiert ein Exponat, dargestellt durch einen Kreis</li>
</ul>
<p>Beispiel</p>
<pre><code>{
  "type": "exhibit",
  "id": "schrank2",
  "name": "Schrank2",
  "previewImage": "assets/previews/schrank.png",
  "content": [
    {
      "type": "chapter",
      "id": "chapter3",
      "title": "track0",
      "audio": "./assets/track0.mp3",
      "timeline": [],
      "text": "Lorem..."
    }
  ]
}
</code></pre>
<h5 id="chapter">Chapter</h5>
<p>Grundsätzlich sollte jedes Exponat mindestens ein Kapitel beinhalten. Dabei gibt es zwei Typen:</p>
<ul>
<li><strong>"type" : "chapter"</strong> - wird als reguläres Kapitel behandelt</li>
<li><strong>"type" : "additional"</strong> - markiert Zusatzinhalte</li>
</ul>
<p>Beispiel</p>
<pre><code>[
    {
      "type": "chapter",
      "id": "chapter1",
      "title": "track0",
      "audio": "./assets/track0.mp3",
      "timeline": [
        {
          "from": 0.2,
          "to" : 0.5,
          "type": "image",
          "src" : "./assets/Francke.jpg"
        }],
      "text": "Lorem..."
    },
    {
      "type": "additional",
      "id": "chapter2",
      "title": "track1 (additional content)",
      "audio": "./assets/track2.mp3",
      "timeline": [],
      "text": "Lorem..."
    }
]
</code></pre>
<h4 id="navigation">Navigation</h4>
<ul>
<li>
<p><strong>"type" : "navigation"</strong> - definiert ein Navigationselement. Navigationselemente können durch anklicken/antippen nie direkt selbst aktiviert werden. Sie können nur die Aktivierung anderer Elemente auslösen, wenn "activateOnClick" mit einer existierenden ID definiert ist oder aktiv werden, wenn sie durch "weiter" oder "zurück" aufgerufen werden und "canBeActive" nicht <em>false</em> ist.</p>
<ul>
<li><strong>"boundingBox" : {}</strong> wird hier (im Gegensatz zu Exhibit Elementen) tourspefizisch definiert, da die Navigation je Tour unterschiedlich ausfallen kann (möglicherweise wäre es sinnvoll eine boundingBox definition optional anzubieten, wenn es dann jeweils auch eine "id" gibt, die mit areas.json abgeglichen werden kann (im Falle von unsichtbaren Navigationselementen z.B., die für jede Tour gleich ist)<ul>
<li>"top" : String</li>
<li>"left": String</li>
<li>"width": String</li>
<li>"height" : String</li>
</ul>
</li>
<li><strong>"svg" : String</strong> - (optional) Pfad zu einer SVG Grafik die angezeigt werden soll</li>
<li><strong>"activateOnClick" : String</strong> - (optional) ID eines Elements welches bei einem Klick aktiviert werden soll (to do: rename)</li>
<li><strong>"canBeActive" : bool</strong> - (default: true) gibt an ob es bei "weiter" / "zurück" aktiviert werden kann oder übersprungen wird</li>
<li><strong>"alwaysVisible" : bool</strong> - (default: false) gibt an ob das Element immer sichtbar ist (sofern eine svg definiert wurde und der Raum aktiv ist)</li>
<li><strong>"audio" : String</strong> - (optional) ermöglicht das Abspielen einer Audio Datei ohne Media Player Overlay wenn das Element aktiv wird</li>
</ul>
</li>
</ul>
<p>Beispiel</p>
<pre><code>{
  "type": "navigation",
  "id" : "navigation2",
  "svg": "./assets/svg/nav/nav_arrowLeft.svg",
  "boundingBox": {
    "top": "35%",
    "left": "2%",
    "width": "25%",
    "height": "25%"
  },
  "activateOnClick" : "raum3",
  "canBeActive" : true,
  "alwaysVisible" : false
}
</code></pre>
<h2 id="mogliche-backend-losungen">Mögliche Backend Lösungen</h2>
<ul>
<li>Open Source Headless CMS: <a href="https://github.com/directus/directus" title="Directus CMS">https://github.com/directus/directus</a></li>
</ul>
<h2 id="alternative-tour-struktur">Alternative Tour Struktur</h2>
<p>Lineare Tour Struktur (Next Aktiviert einfach das "nächste" Element im Array bzw. das Element in der Tour mit der "elementID")</p>
<pre><code>[
    {
        &quot;elementID&quot; : &quot;waisenhaus&quot;
    },
    {
        &quot;elementID&quot; : &quot;floor1&quot;
    },
    {
        &quot;elementID&quot; : &quot;raum1&quot;
    },
    {
        &quot;elementID&quot; : &quot;exponat_1&quot;
    },
    {
        &quot;elementID&quot; : &quot;raum2_in_haus3&quot;
    },
    {
        ...
    }
]
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../BeaconSetup/" class="btn btn-neutral float-right" title="Beacon Setup">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../app/" class="btn btn-neutral" title="App"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../app/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../BeaconSetup/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
